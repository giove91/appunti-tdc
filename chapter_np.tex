\chapter{Caratterizzazione e proprietà di $\NP$}

\section{$\NP$ equivale ad $\ESO$}

\begin{teorema}[Fagin]
  \label{thm:np-eso}
  $\NP = \ESO$.
\end{teorema}


TODO


\section{$\ESOmon \neq \coESOmon$}

TODO


\section{$\NP$-completezza di $\SAT$}

Il Teorema~\ref{thm:np-eso} consente di dimostrare in modo particolarmente semplice l'$\NP$-com\-ple\-tez\-za del problema di soddisfacibilità booleana di formule proposizionali, denominato comunemente ``$\SAT$''.

\begin{teorema}
  $\SAT$ è $\NP$-completo.
\end{teorema}

\begin{proof}
  $\SAT$ appartiene a $\NP$ perché un certificato di soddisfacibilità di una formula è dato dal valore da assegnare alle variabili per fare in modo che la formula risulti vera.
  
  Dobbiamo dimostrare che un qualsiasi problema $\mathcal{B}\in\NP$ si riduce polinomialmente a $\SAT$.
  Supponiamo che $\mathcal{B}$ sia un insieme di strutture nel linguaggio $L=\{R_1,\dots,R_t\}$, dove $R_1,\dots,R_t$ sono relazioni di arietà $b_1,\dots,b_t$, rispettivamente.
  Per il Teorema~\ref{thm:np-eso}, esiste una formula $\gamma$ della forma
  \[ \gamma :\equiv \exists\, S_1,\dots,S_r \, \forall \underbrace{x_1,\dots,x_n}_{\text{prim'ordine}} \, \underbrace{\varphi(x_1,\dots,x_k)}_{\text{senza quantificatori}} \]
  tale che $\mathcal{B}$ sia dato dai modelli di $\gamma$.
  
  Sia $A$ una $L$-struttura, e sia $n=|A|$. Abbiamo che $A$ appartiene a $\mathcal{B}$ se e solo se soddisfa la formula $\gamma$, ovvero se e solo se esistono delle relazioni $S_1^A\subseteq n^{a_1}, \dots, S_r^A\subseteq n^{a_r}$ tali che sia soddisfatta $\forall x_1,\dots,x_n \,\varphi(x_1,\dots,x_k)$.
  Questo è equivalente a trovare un'assegnazione che renda vera la formula proposizionale
  \[ \psi :\equiv \bigwedge_{0\leq c_1,\dots,c_k < n} \varphi(c_1,\dots,c_k) \]
  nelle varabili booleane $S_i(\vec{y})$ ed $R_j(\vec{z})$, al variare di $i\in \{1,\ldots,r\}$, $j\in\{1,\dots,t\}$, $\vec{y}\in n^{a_i}$, $\vec{z}\in n^{b_j}$.
  Sostituiamo a ciascuna variabile del tipo $R_j(\vec{z})$ il valore vero o falso, a seconda che valga o meno $A \models R_i(\vec{z})$; chiamiamo $\tilde\psi$ la formula così ottenuta, che dipende ora solamente dalle variabili $S_i(\vec{y})$ al variare di $i$ e di $\vec{y}\in n^{a_i}$.
  In conclusione, $A$ appartiene a $\mathcal{B}$ se e solo se esiste un'assegnazione delle variabili $S_i(\vec{y})$ che rende vera la $\psi$. Il numero di tali variabili è $n^{a_1}+\ldots+n^{a_r}$, che è un polinomio in $n$.
  Abbiamo quindi mostrato una riduzione polinomiale di $\mathcal{B}$ a $\SAT$.
\end{proof}




